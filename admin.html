<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Admin Panel | CHAOSTITAN41</title>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <style>
        body { background: #000 url('bg.png') no-repeat center center fixed; background-size: cover; color: #fff; font-family: sans-serif; margin: 0; min-height: 100vh; display: flex; align-items: center; justify-content: center; }
        
        /* Login Bereich */
        #login-overlay { background: rgba(0,0,0,0.85); padding: 50px; border-radius: 20px; border: 2px solid #8B0000; text-align: center; width: 350px; backdrop-filter: blur(10px); }
        .pass-container { position: relative; margin: 20px 0; }
        input[type="password"], input[type="text"] { width: 100%; padding: 15px; border-radius: 8px; border: 1px solid #444; background: #000; color: #fff; font-size: 1.1rem; box-sizing: border-box; }
        .toggle-password { position: absolute; right: 10px; top: 50%; transform: translateY(-50%); cursor: pointer; color: #888; font-size: 1.2rem; }
        .login-btn { background: #8B0000; color: white; border: none; padding: 15px; width: 100%; border-radius: 8px; font-weight: bold; cursor: pointer; font-size: 1.1rem; transition: 0.3s; }
        .login-btn:hover { background: #ff0000; box-shadow: 0 0 20px #ff0000; }

        /* Admin Dashboard (Standardm√§√üig versteckt) */
        #admin-content { display: none; width: 90%; max-width: 1000px; background: rgba(0,0,0,0.8); padding: 30px; border-radius: 20px; border: 1px solid #ff0000; }
        .section { background: rgba(20,20,20,0.8); border: 1px solid #8B0000; padding: 20px; border-radius: 10px; margin-bottom: 20px; }
        h2 { color: #ff0000; text-transform: uppercase; border-bottom: 2px solid #8B0000; padding-bottom: 10px; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #222; }
        th { background: #1a1a1a; color: #888; }
        .ban-btn { background: #ff0000; color: white; border: none; padding: 8px 15px; border-radius: 4px; cursor: pointer; font-weight: bold; }
        .unban-btn { background: #00FF41; color: black; border: none; padding: 8px 15px; border-radius: 4px; cursor: pointer; font-weight: bold; }
        .ip-text { font-family: monospace; color: #00FF41; font-size: 1.1rem; }
    </style>
</head>
<body>

    <div id="login-overlay">
        <img src="logo.png" style="max-width: 200px; margin-bottom: 20px;">
        <h2>Admin Giri≈ü</h2>
        <div class="pass-container">
            <input type="password" id="admin-pass" placeholder="≈ûifre Girin...">
            <span class="toggle-password" onclick="togglePass()">üëÅÔ∏è</span>
        </div>
        <button class="login-btn" onclick="checkLogin()">Gƒ∞Rƒ∞≈û YAP</button>
    </div>

    <div id="admin-content">
        <div class="section">
            <h2>Son G√∂nderilen GIF'ler (Live)</h2>
            <table>
                <thead>
                    <tr><th>Zaman</th><th>Kullanƒ±cƒ±</th><th>IP Adresi</th><th>ƒ∞≈ülem</th></tr>
                </thead>
                <tbody id="logs-body"></tbody>
            </table>
        </div>

        <div class="section">
            <h2>Yasaklƒ± IP Listesi</h2>
            <table>
                <thead>
                    <tr><th>IP Adresi</th><th>ƒ∞≈ülem</th></tr>
                </thead>
                <tbody id="bans-body"></tbody>
            </table>
        </div>
        <button class="login-btn" style="width: auto;" onclick="location.reload()">√áIKI≈û YAP</button>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyC4fo69Q0sf7DVgJSDhojAPzLsQ7SDu6cg",
            authDomain: "chaostitan41-website.firebaseapp.com",
            databaseURL: "https://chaostitan41-website-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "chaostitan41-website",
            storageBucket: "chaostitan41-website.firebasestorage.app",
            messagingSenderId: "553158677453",
            appId: "1:553158677453:web:2cad39890ffdedb98aaa84"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        function togglePass() {
            const passField = document.getElementById('admin-pass');
            passField.type = passField.type === 'password' ? 'text' : 'password';
        }

        function checkLogin() {
            const pass = document.getElementById('admin-pass').value;
            if(pass === "DEIN_WUNSCHPASSWORT") { // <--- HIER DEIN PASSWORT EINTRAGEN
                document.getElementById('login-overlay').style.display = 'none';
                document.getElementById('admin-content').style.display = 'block';
                loadData();
            } else {
                alert("Hatalƒ± ≈ûifre!");
            }
        }

        function loadData() {
            // Live Logs
            db.ref('activeGifs').limitToLast(15).on('value', (snapshot) => {
                const tbody = document.getElementById('logs-body');
                tbody.innerHTML = "";
                snapshot.forEach((child) => {
                    const data = child.val();
                    const time = new Date(data.timestamp).toLocaleTimeString();
                    const rawIP = data.userIP || "Bilinmiyor";
                    const cleanIP = rawIP.replace(/_/g, '.');
                    tbody.insertAdjacentHTML('afterbegin', `<tr>
                        <td>${time}</td><td>${data.userName}</td>
                        <td class="ip-text">${cleanIP}</td>
                        <td><button class="ban-btn" onclick="banIP('${rawIP}')">BAN</button></td>
                    </tr>`);
                });
            });

            // Banned List
            db.ref('bannedIPs').on('value', (snapshot) => {
                const tbody = document.getElementById('bans-body');
                tbody.innerHTML = "";
                snapshot.forEach((child) => {
                    const ip = child.key.replace(/_/g, '.');
                    tbody.innerHTML += `<tr>
                        <td class="ip-text">${ip}</td>
                        <td><button class="unban-btn" onclick="unbanIP('${child.key}')">KALDIR</button></td>
                    </tr>`;
                });
            });
        }

        function banIP(ipKey) { if(confirm("Yasakla: " + ipKey.replace(/_/g, '.'))) db.ref('bannedIPs/' + ipKey).set(true); }
        function unbanIP(ipKey) { db.ref('bannedIPs/' + ipKey).remove(); }
    </script>
</body>
</html>
