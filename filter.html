<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChaosTitan - TCP Control</title>
    <style>
        body { background: #0a0a0a; color: #ffffff; font-family: sans-serif; text-align: center; padding: 20px; }
        h1 { color: #8B0000; text-transform: uppercase; }
        .container { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; margin-top: 30px; }
        .card { background: #151515; border: 2px solid #8B0000; border-radius: 15px; padding: 20px; width: 180px; }
        button { background: #8B0000; color: white; border: none; padding: 12px; border-radius: 8px; font-weight: bold; cursor: pointer; width: 100%; }
        button:hover { background: #ff0000; }
        .status { margin-top: 20px; color: #555; font-size: 0.8em; }
    </style>
</head>
<body>

    <h1>ðŸŽ­ Face Control (TCP)</h1>
    <div class="container">
        <div class="card">
            <h3>Alien</h3>
            <button onclick="sendAction('alien', this)">AKTIVIEREN</button>
        </div>
        <div class="card">
            <h3>Ghost</h3>
            <button onclick="sendAction('ghost', this)">AKTIVIEREN</button>
        </div>
    </div>
    <div id="log" class="status">Bereit...</div>

    <script>
        // DEINE TCP ADRESSE
        const WS_URL = "ws://ejlkf6oa2.localto.net:1530"; 

        function sendAction(filterName, btn) {
            const logDiv = document.getElementById('log');
            const socket = new WebSocket(WS_URL);
            const originalText = btn.innerText;

            socket.onopen = () => {
                logDiv.innerText = "Verbunden... sende " + filterName;
                
                // Wir schicken das JSON-Paket an den Streamer.bot
                const payload = {
                    "request": "ExecuteAction",
                    "actionName": "Web_Filter_Handler",
                    "args": {
                        "filter": filterName
                    },
                    "id": "web_req"
                };
                
                socket.send(JSON.stringify(payload));
                
                btn.innerText = "GESENDET!";
                btn.style.background = "green";
                
                // Verbindung sauber schlieÃŸen
                setTimeout(() => { 
                    socket.close(); 
                    btn.innerText = originalText;
                    btn.style.background = "#8B0000";
                    logDiv.innerText = "Befehl erfolgreich Ã¼bertragen.";
                }, 1000);
            };

            socket.onerror = (error) => {
                console.error("Fehler:", error);
                logDiv.innerText = "Fehler: Verbindung fehlgeschlagen.";
                alert("Konnte keine Verbindung zum Bot aufbauen. LÃ¤uft der WebSocket Server auf Port 8081?");
            };
        }
    </script>
</body>
</html>
