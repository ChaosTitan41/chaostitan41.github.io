<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChaosTitan - Face Control</title>
    <style>
        body { background: #0a0a0a; color: #ffffff; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; text-align: center; padding: 20px; }
        h1 { color: #ff0000; text-transform: uppercase; letter-spacing: 3px; margin-bottom: 30px; }
        .container { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; }
        .filter-btn { 
            background: linear-gradient(135deg, #8B0000 0%, #4a0000 100%); 
            color: white; border: 2px solid #ff0000; padding: 25px; 
            width: 200px; border-radius: 15px; font-weight: bold; cursor: pointer; 
            font-size: 1.1rem; transition: 0.3s; box-shadow: 0 5px 15px rgba(255,0,0,0.2);
        }
        .filter-btn:hover { transform: translateY(-3px); box-shadow: 0 8px 20px rgba(255,0,0,0.4); }
        .filter-btn:disabled { background: #222; border-color: #444; color: #666; cursor: not-allowed; transform: none; box-shadow: none; }
        #status { margin-top: 40px; font-family: 'Courier New', Courier, monospace; font-size: 1.2rem; color: #ff0000; }
        .info-text { margin-top: 20px; font-size: 0.8rem; color: #888; }
    </style>
</head>
<body>

    <h1>ðŸŽ­ FACE CONTROL</h1>

    <div class="container">
        <button class="filter-btn" onclick="sendAction('alien')">ðŸ‘½ ALIEN</button>
        <button class="filter-btn" onclick="sendAction('ghost')">ðŸ’€ GHOST</button>
    </div>

    <div id="status">DURUM: HAZIR</div>
    
    <p class="info-text">Filtreyi seÃ§in ve yayÄ±nÄ± deÄŸiÅŸtirin!</p>

    <script>
        // Deine Ngrok-Adresse mit wss:// (Sicherer WebSocket)
        const WS_URL = "wss://aditya-unfeudal-brock.ngrok-free.dev"; 
        const COOLDOWN_TIME = 30; // 30 Sekunden Wartezeit

        function sendAction(actionName) {
            const statusBox = document.getElementById('status');
            const buttons = document.querySelectorAll('.filter-btn');
            
            // Verbindung aufbauen
            const socket = new WebSocket(WS_URL);

            socket.onopen = () => {
                const payload = {
                    "request": "ExecuteAction",
                    "actionName": "Web_Filter_Handler",
                    "args": { "filter": actionName },
                    "id": "web-request"
                };
                socket.send(JSON.stringify(payload));
                
                // Cooldown starten
                startCooldown(buttons, statusBox);
                
                // Verbindung sauber schlieÃŸen
                setTimeout(() => socket.close(), 500);
            };

            socket.onerror = (err) => {
                console.error("Verbindungsfehler:", err);
                statusBox.innerText = "HATA: BAGLANTI YOK!";
                alert("BaÄŸlantÄ± kurulamadÄ±. Ngrok ve Streamer.bot aÃ§Ä±k mÄ±?");
            };
        }

        function startCooldown(buttons, statusBox) {
            let timeLeft = COOLDOWN_TIME;
            buttons.forEach(b => b.disabled = true);

            const timer = setInterval(() => {
                statusBox.innerText = "BEKLEME SÃœRESÄ°: " + timeLeft + "s";
                timeLeft--;

                if (timeLeft < 0) {
                    clearInterval(timer);
                    buttons.forEach(b => b.disabled = false);
                    statusBox.innerText = "DURUM: HAZIR";
                }
            }, 1000);
        }
    </script>
</body>
</html>
