function sendGif() {
    const name = document.getElementById('username').value || "Anonym";
    let urlInput = document.getElementById('gif-url').value.trim();
    const status = document.getElementById('status');

    if (!urlInput.includes("giphy.com")) {
        status.innerText = "❌ Bitte nur Giphy.com Links!";
        return;
    }

    let gifId = "";

    try {
        if (urlInput.includes("media.giphy.com")) {
            // Logik für deinen Link: media.giphy.com/media/.../ID/giphy.gif
            const parts = urlInput.split("/");
            // Die ID steht bei diesen Links immer an vorletzter Stelle vor giphy.gif
            gifId = parts[parts.length - 2];
        } else {
            // Logik für Standard-Links: giphy.com/gifs/name-ID
            const parts = urlInput.split("-");
            gifId = parts[parts.length - 1].split("/")[0].split("?")[0];
        }
    } catch (e) {
        status.innerText = "❌ Link-Format nicht erkannt.";
        return;
    }

    if (gifId && gifId.length > 5) {
        db.ref('activeGifs').push({
            gifId: gifId,
            userName: name,
            timestamp: firebase.database.ServerValue.TIMESTAMP
        }).then(() => {
            status.innerText = "✅ GIF versendet: " + gifId;
            document.getElementById('gif-url').value = "";
        });
    } else {
        status.innerText = "❌ Fehler beim Extrahieren der ID.";
    }
}
